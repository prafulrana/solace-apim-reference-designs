components:
  schemas:
    call-wait:
      $schema: 'http://json-schema.org/draft-07/schema#'
      type: object
      title: Elevator Co call elevator wait time event payload
      required:
        - header
        - body
      properties:
        header:
          additionalProperties: false
          type: object
          required:
            - topic
            - timestamp
          properties:
            topic:
              type: string
            timestamp:
              type: string
        body:
          additionalProperties: false
          type: object
          required:
            - floor
            - wait_min
          properties:
            floor:
              type: integer
            wait_min:
              type: integer
      $id: 'http://eventportal.solace.cloud/apim/elevator-co/usage/call-wait.json'
    journey:
      $schema: 'http://json-schema.org/draft-07/schema#'
      type: object
      title: Elevator Co journey event payload
      required:
        - header
        - body
      properties:
        header:
          additionalProperties: false
          type: object
          required:
            - topic
            - timestamp
          properties:
            topic:
              type: string
            timestamp:
              type: string
        body:
          additionalProperties: false
          type: object
          required:
            - type
            - from_floor
            - to_floor
          properties:
            to_floor:
              type: integer
            from_floor:
              type: integer
            type:
              title: the type of journey
              type: string
              enum:
                - up
                - down
      $id: 'http://eventportal.solace.cloud/apim/elevator-co/usage/journey.json'
    info-screen:
      $schema: 'http://json-schema.org/draft-07/schema#'
      type: object
      title: Elevator Co info screen usage event payload
      required:
        - header
        - body
      properties:
        header:
          additionalProperties: false
          type: object
          required:
            - topic
            - timestamp
          properties:
            topic:
              type: string
            timestamp:
              type: string
        body:
          additionalProperties: false
          type: object
          required:
            - num_sessions_last_hour
            - avg_clicks_per_session
          properties:
            num_sessions_last_hour:
              type: integer
            avg_clicks_per_session:
              type: integer
      $id: 'http://eventportal.solace.cloud/apim/elevator-co/usage/info-screen.json'
  messages:
    call-wait:
      payload:
        $ref: '#/components/schemas/call-wait'
      schemaFormat: application/vnd.aai.asyncapi+json;version=2.0.0
      contentType: application/json
    journey:
      payload:
        $ref: '#/components/schemas/journey'
      schemaFormat: application/vnd.aai.asyncapi+json;version=2.0.0
      contentType: application/json
    info-screen:
      payload:
        $ref: '#/components/schemas/info-screen'
      schemaFormat: application/vnd.aai.asyncapi+json;version=2.0.0
      contentType: application/json
  parameters:
    topic_elem:
      schema:
        type: string      
channels:
  'apim/elevator-co/data-product/V1/json/elevator/info-screen/{resource_org_id}/{resource_region_id}/{resource_sub_region_id}/{resource_site_id}/{resource_type}/{resource_id}':
    subscribe:
      message:
        $ref: '#/components/messages/info-screen'
    parameters:
      resource_org_id:
        $ref: '#/components/parameters/topic_elem'
      resource_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_sub_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_site_id:
        $ref: '#/components/parameters/topic_elem'
      resource_type:
        $ref: '#/components/parameters/topic_elem'
      resource_id:
        $ref: '#/components/parameters/topic_elem'
  'apim/elevator-co/data-product/V1/json/elevator/journey/{resource_org_id}/{resource_region_id}/{resource_sub_region_id}/{resource_site_id}/{resource_type}/{resource_id}':
    subscribe:
      message:
        $ref: '#/components/messages/journey'
    parameters:
      resource_org_id:
        $ref: '#/components/parameters/topic_elem'
      resource_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_sub_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_site_id:
        $ref: '#/components/parameters/topic_elem'
      resource_type:
        $ref: '#/components/parameters/topic_elem'
      resource_id:
        $ref: '#/components/parameters/topic_elem'
  'apim/elevator-co/data-product/V1/json/elevator/call-wait/{resource_org_id}/{resource_region_id}/{resource_sub_region_id}/{resource_site_id}/{resource_type}/{resource_id}':
    subscribe:
      message:
        $ref: '#/components/messages/call-wait'
    parameters:
      resource_org_id:
        $ref: '#/components/parameters/topic_elem'
      resource_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_sub_region_id:
        $ref: '#/components/parameters/topic_elem'
      resource_site_id:
        $ref: '#/components/parameters/topic_elem'
      resource_type:
        $ref: '#/components/parameters/topic_elem'
      resource_id:
        $ref: '#/components/parameters/topic_elem'
asyncapi: 2.0.0
info:
  x-application-class: unspecified
  title: usage
  x-view: provider
  version: 0.0.1
